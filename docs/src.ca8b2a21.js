parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"irmJ":[function(require,module,exports) {
"use strict";var r=this&&this.__spreadArray||function(r,e,n){if(n||2===arguments.length)for(var t,c=0,i=e.length;c<i;c++)!t&&c in e||(t||(t=Array.prototype.slice.call(e,0,c)),t[c]=e[c]);return r.concat(t||Array.prototype.slice.call(e))};function e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.flatMap(n)}function n(r){if(r instanceof Array)return r;if(/[^01_]/.test(r))throw"El número ".concat(r," debería ser un número binario");return r.replace(/_/g,"").split("")}function t(r,n){return r>=0?e(r.toString(2).padStart(n,"0")):t(Math.pow(2,n)+r,n)}function c(r){switch(r){case"0":return e("0000");case"1":return e("0001");case"2":return e("0010");case"3":return e("0011");case"4":return e("0100");case"5":return e("0101");case"6":return e("0110");case"7":return e("0111");case"8":return e("1000");case"9":return e("1001");case"A":return e("1010");case"B":return e("1011");case"C":return e("1100");case"D":return e("1101");case"E":return e("1110");case"F":return e("1111")}}function i(r){switch(r){case"0000":return"0";case"0001":return"1";case"0010":return"2";case"0011":return"3";case"0100":return"4";case"0101":return"5";case"0110":return"6";case"0111":return"7";case"1000":return"8";case"1001":return"9";case"1010":return"A";case"1011":return"B";case"1100":return"C";case"1101":return"D";case"1110":return"E";case"1111":return"F"}}function a(r){if(/[^0123456789ABCDEF_]/.test(r))throw"El número ".concat(r," debería ser un número hexadecimal");return r.replace(/_/g,"").split("")}function u(e){if(e.length<4){if(0!==e.length)throw"binaryNumberToHex asume que el número ".concat(e.join("")," tiene length divisible por 4");return[]}var n=e[0],t=e[1],c=e[2],a=e[3],o=e.slice(4),s="".concat(n).concat(t).concat(c).concat(a);try{return r([i(s)],u(o),!0)}catch(f){throw"binaryNumberToHex asume que el número ".concat(e.join("")," tiene length divisible por 4")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileLegV8=z,exports.compileLegV8WithIRS=Q;var o="X0",s="X1",f="X2",_="X3",l="X4",p="X5",X="X6",h="X7",v="X8",g="X9",m="X10",d="X11",C="X12",y="X13",R="X14",S="X15",b="X16",w="X17",D="X18",A="X19",B="X20",E="X21",N="X22",x="X23",I="X24",T="X25",U="X26",L="X27",M="X28",O="X29",j="X30",Z="XZR";function F(r){if("XZR"===r)return t(31,5);var e=r.match(/X(\d+)/);if(!e)throw"Invalid register ".concat(r);e[0];var n=e[1],c=Number(n);if(c<0||c>30)throw"Invalid register ".concat(r);return t(c,5)}var V="S2_0_C0_C0_0",q="S2_0_C1_C0_0",H="S2_0_C2_C0_0";function J(r){switch(r){case"S2_0_C0_C0_0":return e("0000");case"S2_0_C1_C0_0":return e("0001");case"S2_0_C2_C0_0":return e("0010")}}function P(r,n,c){if("STUR"in r){var i=r.STUR,a=i[0],u=i[1];return e("111_1100_0000",t(i[2],9),"00",F(u),F(a))}if("LDUR"in r){var o=r.LDUR;a=o[0],u=o[1];return e("111_1100_0010",t(o[2],9),"00",F(u),F(a))}function s(r){var n=r[0],t=r[1];return e(F(r[2]),"000000",F(t),F(n))}if("ADD"in r)return e("100_0101_1000",s(r.ADD));if("SUB"in r)return e("110_0101_1000",s(r.SUB));if("AND"in r)return e("100_0101_0000",s(r.AND));if("ORR"in r)return e("101_0101_0000",s(r.ORR));if("CBZ"in r){var f=r.CBZ,_=(a=f[0],f[1]);if("number"!=typeof c[_])throw'Label inexistente: "'.concat(_,'"');return e("101_1010_0",t(c[_]-n,19),F(a))}if("ERET"in r)return e("1101011_0100","11111","000000","11111","00000");if("MRS"in r){var l=r.MRS;a=l[0];return e("11010101001","10","000",J(l[1]),"0000","000",F(a))}if("BR"in r)return e("1101011_0000","11111","000000",F(u=r.BR[0]),"00000");if("INVALID_INSTRUCTION"in r)return K("0",32);throw"Invalid instruction: ".concat(JSON.stringify(r))}function W(r,e,n){return u(P(r,e,n))}function k(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t={},c=r([],e,!0),i=0;i<c.length;i+=1){var a=c[i];if("string"==typeof a){if(a in t)throw'El label "'.concat(a,'" está duplicado');t[a]=i,c.splice(i,1),i-=1}}return c.map(function(r,e){return W(r,e,t)}).map(function(r){return r.join("")})}function z(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return k.apply(void 0,r).map(function(r){return"32'h".concat(r)})}var G={ADD:[Z,Z,Z]};function K(e,n){return n<=0?[]:r([e],K(e,n-1),!0)}function Q(e,n){var t=e.reduce(function(r,e){return"string"!=typeof e?r+1:r},0);if(t>=54)throw"El programa tiene más de 54 instrucciones y sobreescribe el vector de excepciones";return z.apply(void 0,r(r(r([],e,!1),K(G,54-t),!1),n,!1))}
},{}],"SiRp":[function(require,module,exports) {
"use strict";var n=this&&this.__spreadArray||function(n,r,t){if(t||2===arguments.length)for(var c,a=0,e=r.length;a<e;a++)!c&&a in r||(c||(c=Array.prototype.slice.call(r,0,a)),c[a]=r[a]);return n.concat(c||Array.prototype.slice.call(r))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLegV8=t;var r=require("./compileLegV8");function t(n,t){var a=n.split("\n"),e=t.trim()?t.split("\n"):null;try{var i=a.flatMap(c),o=e?(0,r.compileLegV8WithIRS)(i,e.flatMap(c)):r.compileLegV8.apply(void 0,i);return{code:"'{\n      ".concat(o.join(",\n      "),"\n   };"),romSize:o.length}}catch(s){if("string"==typeof s)return{code:"\n      ".concat(s,"\n"),romSize:0};throw s}}function c(r,t){if(r!==r.trim())return c(r.trim(),t);if(0===r.length)return[];var e=r.match(/^(\w+):/);if(e){var i=e[0],o=e[1];return n([o],c(r.substring(i.length),t),!0)}var s=r.match(/^(ADD|SUB|AND|ORR)\s+(X\d{1,2}|XZR),\s*(X\d{1,2}|XZR),\s*(X\d{1,2}|XZR)$/);if(s){s[0];var l=s[1],u=s[2],R=s[3],f=s[4];if(a(u)&&a(R)&&a(f))switch(l){case"ADD":return[{ADD:[u,R,f]}];case"SUB":return[{SUB:[u,R,f]}];case"AND":return[{AND:[u,R,f]}];case"ORR":return[{ORR:[u,R,f]}]}throw"Instrucción tipo R inválida en la línea ".concat(t,': "').concat(r,'"')}var h=r.match(/^(LDUR|STUR)\s+(X\d{1,2}|XZR),\s*\[\s*(X\d{1,2}|XZR),\s*#(\d+)\s*\]$/);if(h){h[0],l=h[1];var p=h[2],v=(R=h[3],h[4]);if(a(p)&&a(R))switch(l){case"LDUR":return[{LDUR:[p,R,Number(v)]}];case"STUR":return[{STUR:[p,R,Number(v)]}]}throw"Instrucción tipo D inválida en la línea ".concat(t,': "').concat(r,'"')}var d=r.match(/^CBZ\s+(X\d{1,2}|XZR),\s*(\w+)$/);if(d){d[0],p=d[1],o=d[2];if(a(p))return[{CBZ:[p,o]}];throw"Instrucción CBZ inválida en la línea ".concat(t,': "').concat(r,'"')}if(r.match(/^ERET/))return[{ERET:[]}];var _=r.match(/^BR\s+(X\d{1,2}|XZR)$/);if(_){_[0];if(a(p=_[1]))return[{BR:[p]}];throw"Instrucción BR inválida en la línea ".concat(t,': "').concat(r,'"')}var m=r.match(/^MRS\s+(X\d{1,2}|XZR),\s*(S2_0_C[012]_C0_0)$/);if(m){m[0],p=m[1];var S=m[2];if(a(p)&&("S2_0_C0_C0_0"===S||"S2_0_C1_C0_0"===S||"S2_0_C2_C0_0"===S))return[{MRS:[p,S]}];throw"Instrucción MRS inválida en la línea ".concat(t,': "').concat(r,'"')}if("INVALID_INSTRUCTION"===r)return[{INVALID_INSTRUCTION:[]}];throw"Instrucción inválida en la línea ".concat(t,': "').concat(r,'"')}function a(n){return e(0,30).map(function(n){return"X".concat(n)}).includes(n)||"XZR"===n}function e(n,r){return Array.from({length:r-n+1}).map(function(r,t){return t+n})}
},{"./compileLegV8":"irmJ"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./parseLegV8");function e(){var t=document.querySelector("#code-output"),e=document.querySelector("#rom-size-output"),o=document.querySelector("#code-input"),n=document.querySelector("#isr-input"),r=document.querySelector("#copy-output-button"),i=document.querySelector("#output");if(!(t&&o&&n&&e&&r&&i))throw alert("Error: node not found"),{codeOutput:t,codeInput:o,isrInput:n,romSizeOutput:e,copyOutputButton:r,output:i};u({codeOutput:t,isrInput:n,codeInput:o,romSizeOutput:e,copyOutputButton:r,output:i})}function u(e){var u=e.codeInput,n=e.isrInput,r=e.codeOutput,i=e.romSizeOutput,c=e.copyOutputButton,p=e.output;var a=o(function(){var e=(0,t.parseLegV8)(u.value,n.value),o=e.code,c=e.romSize;i.textContent=String(c),r.textContent=o},450);a(),u.addEventListener("input",a),n.addEventListener("input",a);var d=localStorage.getItem("code-input");d&&(u.value=d);var l=o(function(){localStorage.setItem("code-input",u.value)},800);u.addEventListener("input",l);var v=localStorage.getItem("isr-input");v&&(u.value=v);var s=o(function(){localStorage.setItem("isr-input",u.value)},800);n.addEventListener("input",s),c.addEventListener("click",function(){navigator.clipboard.writeText(p.textContent||"")})}function o(t,e){var u;return function(){u&&clearTimeout(u),u=setTimeout(function(){t(),u=null},e)}}window.addEventListener("DOMContentLoaded",e);
},{"./parseLegV8":"SiRp"}]},{},["QCba"], null)
//# sourceMappingURL=src.ca8b2a21.js.map