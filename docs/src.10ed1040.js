parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"irmJ":[function(require,module,exports) {
"use strict";var r=this&&this.__spreadArray||function(r,n,e){if(e||2===arguments.length)for(var t,c=0,i=n.length;c<i;c++)!t&&c in n||(t||(t=Array.prototype.slice.call(n,0,c)),t[c]=n[c]);return r.concat(t||Array.prototype.slice.call(n))};function n(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.flatMap(e)}function e(r){if(r instanceof Array)return r;if(/[^01_]/.test(r))throw"El número ".concat(r," debería ser un número binario");return r.replace(/_/g,"").split("")}function t(r,e){return r>=0?n(r.toString(2).padStart(e,"0")):t(Math.pow(2,e)+r,e)}function c(r){switch(r){case"0":return n("0000");case"1":return n("0001");case"2":return n("0010");case"3":return n("0011");case"4":return n("0100");case"5":return n("0101");case"6":return n("0110");case"7":return n("0111");case"8":return n("1000");case"9":return n("1001");case"A":return n("1010");case"B":return n("1011");case"C":return n("1100");case"D":return n("1101");case"E":return n("1110");case"F":return n("1111")}}function i(r){switch(r){case"0000":return"0";case"0001":return"1";case"0010":return"2";case"0011":return"3";case"0100":return"4";case"0101":return"5";case"0110":return"6";case"0111":return"7";case"1000":return"8";case"1001":return"9";case"1010":return"A";case"1011":return"B";case"1100":return"C";case"1101":return"D";case"1110":return"E";case"1111":return"F"}}function a(r){if(/[^0123456789ABCDEF_]/.test(r))throw"El número ".concat(r," debería ser un número hexadecimal");return r.replace(/_/g,"").split("")}function u(n){if(n.length<4){if(0!==n.length)throw"binaryNumberToHex asume que el número ".concat(n.join("")," tiene length divisible por 4");return[]}var e=n[0],t=n[1],c=n[2],a=n[3],o=n.slice(4),s="".concat(e).concat(t).concat(c).concat(a);try{return r([i(s)],u(o),!0)}catch(f){throw"binaryNumberToHex asume que el número ".concat(n.join("")," tiene length divisible por 4")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.compileLegV8=h,exports.compileLegV8WithIRS=S;var o="XZR";function s(r){if("XZR"===r)return t(31,5);var n=r.match(/X(\d+)/);if(!n)throw"Invalid register ".concat(r);n[0];var e=n[1],c=Number(e);if(c<0||c>30)throw"Invalid register ".concat(r);return t(c,5)}function f(r){switch(r){case"S2_0_C0_C0_0":return n("0000");case"S2_0_C1_C0_0":return n("0001");case"S2_0_C2_C0_0":return n("0010")}}function l(r,e,c){if("STUR"in r){var i=r.STUR,a=i[0],u=i[1];return n("111_1100_0000",t(i[2],9),"00",s(u),s(a))}if("LDUR"in r){var _=r.LDUR;a=_[0],u=_[1];return n("111_1100_0010",t(_[2],9),"00",s(u),s(a))}function R(r){var e=r[0],t=r[1];return n(s(r[2]),"000000",s(t),s(e))}function D(r){var e=r[0],c=r[1];return n(t(r[2],12),s(c),s(e))}if("ADD"in r)return n("100_0101_1000",R(r.ADD));if("SUB"in r)return n("110_0101_1000",R(r.SUB));if("AND"in r)return n("100_0101_0000",R(r.AND));if("ORR"in r)return n("101_0101_0000",R(r.ORR));if("ADDI"in r)return n("100_1000_100",D(r.ADDI));if("SUBI"in r)return n("111_1000_100",D(r.SUBI));if("CBZ"in r){var h=r.CBZ,v=(a=h[0],h[1]);if("number"!=typeof c[v])throw'Label inexistente: "'.concat(v,'"');return n("101_1010_0",t(c[v]-e,19),s(a))}if("ERET"in r)return n("1101011_0100","11111","000000","11111","00000");if("NOP"in r)return l({ADD:[o,o,o]},e,c);if("MRS"in r){var S=r.MRS;a=S[0];return n("11010101001","10","000",f(S[1]),"0000","000",s(a))}if("BR"in r)return n("1101011_0000","11111","000000",s(u=r.BR[0]),"00000");if("INVALID_INSTRUCTION"in r)return p("0",32);throw"Invalid instruction: ".concat(JSON.stringify(r))}function _(r,n,e){return u(l(r,n,e))}function R(r){if("STUR"in r){var n=r.STUR,e=n[0],t=n[1],c=n[2];return"STUR ".concat(e,", [").concat(t,", #").concat(c,"]")}if("LDUR"in r){var i=r.LDUR;e=i[0],t=i[1],c=i[2];return"LDUR ".concat(e,", [").concat(t,", #").concat(c,"]")}function a(r){var n=r[0],e=r[1],t=r[2];return"".concat(n,", ").concat(e,", ").concat(t)}function u(r){var n=r[0],e=r[1],t=r[2];return"".concat(n,", ").concat(e,", #").concat(t)}if("ADD"in r)return"ADD ".concat(a(r.ADD));if("SUB"in r)return"SUB ".concat(a(r.SUB));if("AND"in r)return"AND ".concat(a(r.AND));if("ORR"in r)return"ORR ".concat(a(r.ORR));if("ADDI"in r)return"ADDI ".concat(u(r.ADDI));if("SUBI"in r)return"SUBI ".concat(u(r.SUBI));if("CBZ"in r){var o=r.CBZ,s=(e=o[0],o[1]);return"CBZ ".concat(e,", ").concat(s)}if("ERET"in r)return"ERET";if("NOP"in r)return"NOP";if("MRS"in r){var f=r.MRS,l=(e=f[0],f[1]);return"MRS ".concat(e,", ").concat(l)}if("BR"in r){t=r.BR[0];return"BR ".concat(t)}return"INVALID_INSTRUCTION"in r?"INVALID_INSTRUCTION":"???"}function D(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t={},c=r([],n,!0),i=0;i<c.length;i+=1){var a=c[i];if("string"==typeof a){if(a in t)throw'El label "'.concat(a,'" está duplicado');t[a]=i,c.splice(i,1),i-=1}}return c.map(function(r,n){return{hex:_(r,n,t).join(""),source:R(r)}})}function h(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return D.apply(void 0,r).map(function(r){return{hex:"32'h".concat(r.hex),source:r.source}})}var v={NOP:[]};function p(n,e){return e<=0?[]:r([n],p(n,e-1),!0)}function S(n,e){var t=n.reduce(function(r,n){return"string"!=typeof n?r+1:r},0);if(t>=54)throw"El programa tiene más de 54 instrucciones y sobreescribe el vector de excepciones";return h.apply(void 0,r(r(r([],n,!1),p(v,54-t),!1),e,!1))}
},{}],"SiRp":[function(require,module,exports) {
"use strict";var n=this&&this.__spreadArray||function(n,t,r){if(r||2===arguments.length)for(var c,a=0,e=t.length;a<e;a++)!c&&a in t||(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return n.concat(c||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseLegV8=r;var t=require("./compileLegV8");function r(n,r){var a=n.split("\n"),e=r.trim()?r.split("\n"):null;try{var i=a.flatMap(c),o=e?(0,t.compileLegV8WithIRS)(i,e.flatMap(c)):t.compileLegV8.apply(void 0,i);return{code:"'{\n".concat("           ").concat(o.map(function(n){return"// ".concat(n.source,"\n").concat("           ").concat(n.hex)}).join(",\n".concat("           ")),"\n        };"),romSize:o.length}}catch(s){if("string"==typeof s)return{code:"\n           ".concat(s,"\n"),romSize:0};throw s}}function c(t,r){if(t!==t.trim())return c(t.trim(),r);if(0===t.length)return[];var e=t.match(/^(\w+):/);if(e){var i=e[0],o=e[1];return n([o],c(t.substring(i.length),r),!0)}var s=t.match(/^(ADD|SUB|AND|ORR)\s+(X\d{1,2}|XZR),\s*(X\d{1,2}|XZR),\s*(X\d{1,2}|XZR)$/);if(s){s[0];var u=s[1],l=s[2],f=s[3],R=s[4];if(a(l)&&a(f)&&a(R))switch(u){case"ADD":return[{ADD:[l,f,R]}];case"SUB":return[{SUB:[l,f,R]}];case"AND":return[{AND:[l,f,R]}];case"ORR":return[{ORR:[l,f,R]}]}throw"Instrucción tipo R inválida en la línea ".concat(r,': "').concat(t,'"')}var h=t.match(/^(ADDI|SUBI)\s+(X\d{1,2}|XZR),\s*(X\d{1,2}|XZR),\s*#(\d+)$/);if(h){h[0],u=h[1],l=h[2],f=h[3];var d=h[4];if(a(l)&&a(f))switch(u){case"ADDI":return[{ADDI:[l,f,Number(d)]}];case"SUBI":return[{SUBI:[l,f,Number(d)]}]}throw"Instrucción tipo I inválida en la línea ".concat(r,': "').concat(t,'"')}var v=t.match(/^(LDUR|STUR)\s+(X\d{1,2}|XZR),\s*\[\s*(X\d{1,2}|XZR),\s*#(-?\d+)\s*\]$/);if(v){v[0],u=v[1];var m=v[2],p=(f=v[3],v[4]);if(a(m)&&a(f))switch(u){case"LDUR":return[{LDUR:[m,f,Number(p)]}];case"STUR":return[{STUR:[m,f,Number(p)]}]}throw"Instrucción tipo D inválida en la línea ".concat(r,': "').concat(t,'"')}var I=t.match(/^CBZ\s+(X\d{1,2}|XZR),\s*(\w+)$/);if(I){I[0],m=I[1],o=I[2];if(a(m))return[{CBZ:[m,o]}];throw"Instrucción CBZ inválida en la línea ".concat(r,': "').concat(t,'"')}if(t.match(/^ERET$/))return[{ERET:[]}];if(t.match(/^NOP$/))return[{NOP:[]}];var X=t.match(/^BR\s+(X\d{1,2}|XZR)$/);if(X){X[0];if(a(m=X[1]))return[{BR:[m]}];throw"Instrucción BR inválida en la línea ".concat(r,': "').concat(t,'"')}var _=t.match(/^MRS\s+(X\d{1,2}|XZR),\s*(S2_0_C[012]_C0_0)$/);if(_){_[0],m=_[1];var D=_[2];if(a(m)&&("S2_0_C0_C0_0"===D||"S2_0_C1_C0_0"===D||"S2_0_C2_C0_0"===D))return[{MRS:[m,D]}];throw"Instrucción MRS inválida en la línea ".concat(r,': "').concat(t,'"')}if("INVALID_INSTRUCTION"===t)return[{INVALID_INSTRUCTION:[]}];if(t.startsWith("//"))return[];throw"Instrucción inválida en la línea ".concat(r,': "').concat(t,'"')}function a(n){return e(0,30).map(function(n){return"X".concat(n)}).includes(n)||"XZR"===n}function e(n,t){return Array.from({length:t-n+1}).map(function(t,r){return r+n})}
},{"./compileLegV8":"irmJ"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./parseLegV8");function e(){var t=document.querySelector("#code-output"),e=document.querySelector("#rom-size-output"),o=document.querySelector("#code-input"),n=document.querySelector("#isr-input"),r=document.querySelector("#copy-output-button"),c=document.querySelector("#output");if(!(t&&o&&n&&e&&r&&c))throw alert("Error: node not found"),{codeOutput:t,codeInput:o,isrInput:n,romSizeOutput:e,copyOutputButton:r,output:c};u({codeOutput:t,isrInput:n,codeInput:o,romSizeOutput:e,copyOutputButton:r,output:c})}function u(e){var u=e.codeInput,r=e.isrInput,c=e.codeOutput,i=e.romSizeOutput,p=e.copyOutputButton,d=e.output;o("code-input",u),o("isr-input",r);var a=n(function(){var e=(0,t.parseLegV8)(u.value,r.value),o=e.code,n=e.romSize;i.textContent=String(n-1),c.textContent=o},450);a(),u.addEventListener("input",a),r.addEventListener("input",a),p.addEventListener("click",function(){navigator.clipboard.writeText(d.textContent||"")})}function o(t,e){var u=localStorage.getItem(t);u&&(e.value=u);var o=n(function(){localStorage.setItem(t,e.value)},800);e.addEventListener("input",o)}function n(t,e){var u;return function(){u&&clearTimeout(u),u=setTimeout(function(){t(),u=null},e)}}window.addEventListener("DOMContentLoaded",e);
},{"./parseLegV8":"SiRp"}]},{},["QCba"], null)
//# sourceMappingURL=src.10ed1040.js.map